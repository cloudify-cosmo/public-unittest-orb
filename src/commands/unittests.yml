description: >
  This command runs the unit tests for a plugin
steps:
  - run:
      name: upgrade pip
      command: pip install --upgrade pip
  - run:
      name: upgrade setuptools
      command: pip install --upgrade setuptools
  - run:
      name: Git checkout
      command: git checkout ${CIRCLE_BRANCH}
  - run:
      name: Add Submodules
      command: git submodule update --init --recursive
  - run:
      name: Install tox
      command: pip install tox
  - run:
      name: Run flake8 test
      command: tox -e linting
  - run:
      name: Run py36 test
      command: tox -e unittesting
